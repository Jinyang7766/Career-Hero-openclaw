# User-Facing UX 规范（Wave7）

> 目标：把 Wave6 的“工程可用（接口/门禁/回滚可执行）”推进到“用户可用（看得懂、用得顺、可恢复）”。
>
> 适用范围：Web 端核心链路（简历/JD 输入、分析结果、历史记录、异常与降级提示）。

---

## 1. 设计原则

1. **先决策，后细节**：用户先看到“该怎么做”，再看到“为什么”。
2. **先业务语言，后技术语言**：默认只展示用户能理解且可行动的信息。
3. **先恢复路径，后错误原因**：报错必须给下一步动作（重试/返回/联系客服）。
4. **一致口径**：同一状态在不同页面用同一种说法，不混用术语。

---

## 2. 信息层级规范（Information Hierarchy）

### L1：决策层（首屏必须可见）
用于回答“现在结果如何、我下一步做什么”。

- 分析总分与结论标签（如：匹配度高/中/低）
- Top 3 可执行建议（动词开头）
- 当前状态（成功 / 处理中 / 部分降级 / 失败）

### L2：解释层（默认可见，位于 L1 下方）
用于回答“为什么是这个结果”。

- 关键命中与缺失关键词摘要
- 评分维度简述（自然语言）
- 降级说明（如检索未命中，结果基于本地规则）

### L3：技术层（默认折叠或隐藏）
用于排障与客服协同，不影响普通用户完成主任务。

- `requestId` / `sessionId` / `traceId`
- `retrievalMeta` 细项（chunkId、sourceId、latency 等）
- 机器错误码、接口状态码、原始调试字段

### 页面排序约束（最低要求）
1. 输入页：任务目标提示 > 输入框 > 示例/限制 > 技术详情（隐藏）
2. 结果页：结论与建议 > 解释与证据 > 历史关联 > 技术详情（隐藏）
3. 历史页：时间与结论 > 可恢复操作（查看/复用）> 技术追溯（隐藏）

---

## 3. 文案语气规范（Tone of Voice）

### 语气基线
- **清晰**：短句、少术语、避免双重否定。
- **中性**：不指责用户输入“错误”，改为“当前信息不足/格式不支持”。
- **可行动**：每条提示给明确下一步。

### 推荐句式
- 成功：`已完成分析。建议先优化 {X}，再补充 {Y}。`
- 处理中：`正在分析，通常需要 5-15 秒。你可以先查看历史记录。`
- 降级：`已完成基础分析。知识检索暂不可用，结果可能偏保守。`
- 失败：`这次没有成功完成。请重试；若仍失败，可复制请求编号联系支持。`
- 空态：`还没有分析记录。先粘贴简历和岗位描述，开始第一次分析。`

### 禁用表达
- “未知错误”“系统异常（无动作指引）”“参数非法（无解释）”。
- 仅输出技术描述，不给用户行动建议。

---

## 4. 技术字段默认隐藏规则（Default Hide Rules）

### 4.1 默认隐藏字段清单
- 标识类：`requestId`、`sessionId`、`traceId`、`chunkId`
- 内部状态类：`degraded_reason_internal`、`fallback_strategy`
- 调试类：`raw_score_breakdown`、`latency_ms_detail`、`debug_flags`
- 安全敏感类：token、cookie、签名、内部 URL、堆栈

### 4.2 可见性策略
- 普通用户视图：**默认隐藏**，不影响任务完成。
- 支持协同视图：通过“查看技术详情”折叠区按需展开。
- 导出/复制：默认导出业务可读内容；技术字段需二次确认。

### 4.3 例外条件（可短暂显示）
仅在以下场景允许露出技术字段：
1. 用户主动点击“复制诊断信息”。
2. 客服/运维指导下进行排障。
3. 灰度阶段由指定测试账号开启调试模式。

---

## 5. Wave7 UX 验收门禁（文档口径）

- [ ] 核心页面满足 L1/L2/L3 信息层级分层
- [ ] 成功/处理中/降级/失败/空态文案已统一
- [ ] 技术字段默认隐藏，且有可控展开入口
- [ ] 所有错误提示包含可执行下一步动作
- [ ] 发布前完成 UX 验收清单（见 `docs/release-readiness-ux-checklist.md`）

---

## 6. 与 PRD 模块映射（4.1 ~ 4.5）

- **4.1 简历管理与解析**：输入约束、解析状态、失败恢复可读。
- **4.2 JD 管理与岗位画像**：JD 信息完整度提示、缺失引导。
- **4.3 匹配分析与优化建议**：结果先结论后解释，建议可执行。
- **4.4 历史与追溯**：历史记录以“可复用结论”优先展示。
- **4.5 质量与发布**：将 UX 验收纳入 release-readiness 门禁。